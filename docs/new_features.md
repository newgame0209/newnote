# ノートアプリ 新機能実装計画

## 実装優先順位（低い順）

### 1. キャンバスの戻る機能
- Fabric.jsの`undo`機能を利用
- ツールバーに戻るボタンを追加
- 実装の複雑さ：低
- バグリスク：低
- 既存機能への影響：最小限

### 2. Apple Pencilのみ反応
- PointerEventの`pointerType`を利用して制御
- タッチイベントのフィルタリング
- 実装の複雑さ：低
- バグリスク：低
- 既存機能への影響：最小限

### 3. 音声スピード調整
- Google TTS APIのスピードパラメータ追加
- 設定UIに速度調整スライダー追加
- 実装の複雑さ：低
- バグリスク：低
- 既存機能への影響：小

### 4. テキスト入力機能
- 新規メモ帳コンポーネントの作成
- キーボード入力対応（PC/タブレット/スマホ）
- コピー&ペースト機能
- 既存のOCR/TTS APIを統合
- 実装の複雑さ：低～中
- バグリスク：低～中
- 既存機能への影響：なし（独立したコンポーネント）

### 5. 音声プレイヤー
- 音声プレイヤーUIの実装
- 再生/停止/時間調整機能
- 実装の複雑さ：中
- バグリスク：中
- 既存機能への影響：中

### 6. しおり機能
- しおりデータのモデル追加
- ツールバーにしおりボタン追加
- ページ遷移ロジックの修正
- ノート一覧からのしおりページ遷移
- 実装の複雑さ：中
- バグリスク：中
- 既存機能への影響：中

### 7. ページ単位の音声変換
- 選択範囲のOCR処理
- ページ単位での音声変換
- UI/UXの改修
- 実装の複雑さ：高
- バグリスク：高
- 既存機能への影響：大

### 8. 用紙設定モーダル
- 設定モーダルUI実装
  - 用紙サイズ
  - 用紙の色
  - 用紙デザイン
  - 用紙の向き
- データモデルの変更
- キャンバス設定の永続化
- 設定の保存と読み込み
- 実装の複雑さ：高
- バグリスク：高
- 既存機能への影響：大

## 技術的な考慮事項

### パフォーマンス
- キャンバスの描画パフォーマンス維持
- メモリ使用量の最適化
- 音声データのキャッシュ管理

### セキュリティ
- ユーザーデータの保護
- APIキーの適切な管理
- 入力値のバリデーション

### UX/UI
- 一貫したデザインの維持
- レスポンシブ対応
- 直感的な操作性の確保

### テスト
- 各機能の単体テスト
- 統合テスト
- クロスブラウザ/デバイステスト

## 実装スケジュール

各機能の実装は独立して進められるよう設計し、段階的にリリースすることを推奨します。
優先順位の低い機能から順次実装を開始し、各機能完了後にテストとレビューを実施します。
